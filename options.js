!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=".",o(o.s=10)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e,o){"use strict";var n=o(0)(o(0));Object.defineProperty(e,"__esModule",{value:!0}),e.decipher=e.cipher=e.fetch_retry=e.fetchWithTimeout=void 0;var r=o(2),a=(0,n.default)(r);function c(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function i(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach((function(e){(0,a.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}e.setStoreWithExpiry=s,e.getStoreWithExpiry=u,e.plusDlCount=function(){var t=u("dailyDlCount");t=t?parseInt(t)+1:1;var e=60*(o=(new Date).getHours(),n=(new Date).getMinutes(),1440-60*o-n)*1e3;var o,n;s("dailyDlCount",t,e)};var l=e.fetchWithTimeout=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=new AbortController,r=i({},e,{signal:n.signal});setTimeout((function(){n.abort()}),o);return fetch(t,r).then((function(t){if(!t.ok)throw new Error("".concat(t.status,": ").concat(t.statusText));return t})).catch((function(t){if("AbortError"===t.name)throw new Error("Response timed out");throw new Error(t.message)}))};e.fetch_retry=function t(e,o,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return l(e,o,n).catch((function(a){if(1===r)throw a;return t(e,o,n,r-1)}))},e.cipher=function(t){var e=function(t){return t.split("").map((function(t){return t.charCodeAt(0)}))},o=function(t){return("0"+Number(t).toString(16)).substr(-2)},n=function(o){return e(t).reduce((function(t,e){return t^e}),o)};return function(t){return t.split("").map(e).map(n).map(o).join("")}},e.decipher=function(t){var e=function(e){return(o=t,o.split("").map((function(t){return t.charCodeAt(0)}))).reduce((function(t,e){return t^e}),e);var o};return function(t){return t.match(/.{1,2}/g).map((function(t){return parseInt(t,16)})).map(e).map((function(t){return String.fromCharCode(t)})).join("")}};function s(t,e,o){var n={value:e,expiry:(new Date).getTime()+o};localStorage.setItem(t,JSON.stringify(n))}function u(t){var e=localStorage.getItem(t);if(!e)return null;var o=JSON.parse(e);return(new Date).getTime()>o.expiry?(localStorage.removeItem(t),null):o.value}},function(t,e){t.exports=function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DISABLE_DOWNLOADING_FROM_YOUTUBE_REGEXP=e.supportedLanguages=e.t=e.PRE_DEF_EXTS=e.YTDLPAGE=e.HOMEPAGE=e.ISEDGE=e.PROENV=void 0,e.doInit=function(){if(void 0===localStorage[c]||""==localStorage[c]){var t=new Array({ext:"flv",size:10},{ext:"hlv",size:10},{ext:"f4v",size:10},{ext:"mp4",size:10},{ext:"mp3",size:10},{ext:"wma",size:10},{ext:"wav",size:10},{ext:"m4a",size:10},{ext:"webm",size:10},{ext:"ogg",size:10},{ext:"ogv",size:10},{ext:"acc",size:10},{ext:"mov",size:10},{ext:"mkv",size:10},{ext:"m3u8",size:0},{ext:"ts",size:1e11});localStorage[c]=JSON.stringify(t)}if(void 0===localStorage.Type){var e=new Array({Type:"video/*",size:2048},{Type:"audio/*",size:10});localStorage.Type=JSON.stringify(e)}if(void 0===localStorage.BlockedDomains){var o=new Array;localStorage.BlockedDomains=JSON.stringify(o)}void 0===localStorage.repeat&&(localStorage.repeat=!1);void 0===localStorage.repeatReg&&(localStorage.repeatReg="\\?[\\S]+");void 0===localStorage.Debug&&(localStorage.Debug=!1);void 0===localStorage.TitleName&&(localStorage.TitleName=!1);void 0===localStorage.popListCount&&(localStorage.popListCount=30);void 0===localStorage.showCountOnIcon&&(localStorage.showCountOnIcon=!0)},e.tr=function(t){$("#"+t).html(i(t))},e.getLanguage=s,e.getExtManifest=function(){return r.runtime.getManifest()},e.isActivePro=p,e.getLoaderUrl=function(){var t,e=s(),o="://cococut.net/";t="other"!=e?"hls.html":"ohls.html";var r,c=function(){var t=m();t.dailycount||(t.dailycount=50);var e=(0,n.getStoreWithExpiry)("dailyDlCount");if(e&&e>t.dailycount){return"exceeded.html"}}();c&&(t=c);p()&&(o="://pro.cococut.net/",t="hls.vhtml","other"==e&&(t="ohls.vhtml"));r=a?o+(l.includes(e)?e+"/":"")+t:"://127.0.0.1/"+t;return r},e.getDLMUrl=function(){var t,e,o=s(),n="://cococut.net/";t="other"!=o?"dlm.html":"odlm.html";p()&&(n="://pro.cococut.net/",t="dlm.vhtml","other"==o&&(t="odlm.vhtml"));e=a?n+"dlm/"+(l.includes(o)?o+"/":"")+t:"://127.0.0.1/dlm/"+t;return e};var n=o(1),r=navigator.userAgent.includes("Chrome")?chrome:browser,a=e.PROENV=!0;e.ISEDGE=!1,e.HOMEPAGE=void 0,e.YTDLPAGE=void 0;a?(e.HOMEPAGE="https://cococut.net",e.YTDLPAGE="https://pro.cococut.net/yt/"):(console.log("dev env"),e.HOMEPAGE="http://127.0.0.1",e.YTDLPAGE="http://127.0.0.1");var c=e.PRE_DEF_EXTS="Ext04";r.browserAction.setIcon({path:{16:"assets/icons/16x16_gray.png",32:"assets/icons/32x32_gray.png",48:"assets/icons/48x48_gray.png",64:"assets/icons/64x64_gray.png",128:"assets/icons/128x128_gray.png"}});var i=e.t=r.i18n.getMessage;var l=e.supportedLanguages=["zh_tw","zh_cn"];function s(){var t=r.i18n.getUILanguage();return t.match(/zh-CN/)?"zh_cn":t.match(/zh-TW/)?"zh_tw":t.startsWith("zh")?"zh_cn":t.startsWith("en")?t.substr(0,2):"other"}if(r.runtime.onInstalled.addListener((function(t){var e=s(),o="https://cococut.net/"+(l.includes(e)?e+"/":"")+"installed.html";localStorage.getItem("installed")||r.tabs.create({url:o},(function(t){console.log("Hi, wellcome:)"),localStorage.setItem("installed","t")}))})),r.runtime.setUninstallURL){var u=s(),d="https://cococut.net/"+(l.includes(u)?u+"/":"")+"uninstalled.html";r.runtime.setUninstallURL(d)}e.DISABLE_DOWNLOADING_FROM_YOUTUBE_REGEXP=/^https?:\/\/www\.youtube\.com\//;function p(){if(localStorage.getItem("pui")&&"active"==(0,n.decipher)("CocoCut pro user")(localStorage.getItem("pui")).split("||")[3])return!0;return!1}var m=function(){var t=localStorage.option,e={counter:0,domain:{}};try{t&&Object.assign(e,JSON.parse(t)),e.counter=Math.max(0,Math.floor(Number(e.counter)||0)),e.rcounterr=Math.max(0,Math.floor(Number(e.rcounterr)||0)),localStorage.option=JSON.stringify(e)}catch(t){console.log(t.stack)}return e}},,,,,function(t,e,o){},,function(t,e,o){"use strict";o(8);var n=o(3);(0,n.doInit)(),function(){for(var t=0,e=["TcustomTypeIgn","TcustomSetting","TcustomExt","TcustomExtDec","TcustomExtName","TcustomExtSize","TcustomAdd","TcustomCtDec","TcustomCtMIME","TcustomOt","TcustomOtIgnore","TcustomOtIgnoreDec","TcustomOtReg","TcustomOtFilename","TcustomDebug","ResetExt","SaveExt","modalOkBtn","modalCancelBtn","TcustomAddMine","importSettingsOkBtn","importSettingsCancelBtn","importSettingsWarning","importSettingsFilelabel","importSettingsFilename","exportSettingBtn","importSettingBtn","customNavIEbtns","TcustomBlockedDomains","TcustomBlockedDomainsDec","TcustomBlockedDomainExample","TcustomMaxDisplayCount","TcustomShowCountOnIcon"];t<e.length;t++){var o=e[t];(0,n.tr)(o)}}();var r=new Array;r=JSON.parse(localStorage[n.PRE_DEF_EXTS]);for(var a=0;a<r.length;a++)$("#ExtTd").append(l(r[a].ext,r[a].size));var c=new Array;c=JSON.parse(localStorage.Type);for(a=0;a<c.length;a++)$("#ExtTy").append(s(c[a].Type,c[a].size));var i=new Array;i=JSON.parse(localStorage.BlockedDomains);for(a=0;a<i.length;a++)$("#blockedDomainsTd").append(u(i[a]));function l(){var t=arguments[0]?arguments[0]:"",e=arguments[1]?arguments[1]:"0";return'<tr><td><input type="text" class="ext input" placeholder="'+(0,n.t)("TcustomExtName")+'" value="'+t+'"></td><td class="TdSize"><input type="text" class="size input" placeholder="'+(0,n.t)("TcustomExtSize")+'" value="'+e+'"></td><td class="SizeButton">kb</td><td id="RemoveExt" class="RemoveButton"><a class="delete"></a></td></tr>'}function s(){var t=arguments[0]?arguments[0]:"",e=arguments[1]?arguments[1]:"0";return'<tr><td><input type="text" class="Type input" placeholder="'+(0,n.t)("TcustomCtMIME")+'" value="'+t+'"></td><td class="TdSize"><input type="text" class="size input" placeholder="'+(0,n.t)("TcustomExtSize")+'" value="'+e+'"></td><td class="SizeButton">kb</td><td id="RemoveType" class="RemoveButton"><a class="delete"></a></td></tr>'}function u(){var t=arguments[0]?arguments[0]:"";return'<tr><td><input type="text" class="blockedDomain input" placeholder="'+(0,n.t)("TcustomBlockedDomainPlaceholder")+'" value="'+t+'"></td><td id="RemoveBlockedDomain" class="RemoveButton"><a class="delete"></a></td></tr>'}function d(t,e){$("#confMsg").addClass("is-active"),$("html").addClass("is-clipped"),$("#TempntcText").html(t),e&&($("#modalCancelBtn").show(),$("#modalOkBtn").addClass("comfirmDoit"))}function p(){$("#confMsg").removeClass("is-active"),$("html").removeClass("is-clipped"),$("#modalCancelBtn").hide()}"true"==localStorage.repeat&&$("#repeat").attr("checked","checked"),$("#repeatReg").val(localStorage.repeatReg),"true"==localStorage.Debug&&$("#Debug").attr("checked","checked"),"true"==localStorage.TitleName&&$("#TitleName").attr("checked","checked"),"true"==localStorage.showCountOnIcon&&$("#showCountOnIcon").attr("checked","checked"),$("#MaxDisplayCount").attr("value",localStorage.popListCount),$("#AddExt").bind("click",(function(){$("#ExtTd").prepend(l()),$("#RemoveExt*").bind("click",(function(){$(this).parent().remove()}))})),$("#AddType").bind("click",(function(){$("#ExtTy").prepend(s()),$("#RemoveType*").bind("click",(function(){$(this).parent().remove()}))})),$("#AddBlockedDomain").bind("click",(function(){$("#blockedDomainsTd").prepend(u()),$("#RemoveBlockedDomain*").bind("click",(function(){$(this).parent().remove()}))})),$("#modalOkBtn").click((function(){p()})),$("#modalCancelBtn").click((function(){p()})),$("#RemoveExt*").bind("click",(function(){$(this).parent().remove()})),$("#RemoveType*").bind("click",(function(){$(this).parent().remove()})),$("#RemoveBlockedDomain*").bind("click",(function(){$(this).parent().remove()})),$("#SaveExt").bind("click",(function(){var t=new Array,e=new Array,o=new Array,r=!0;$("#ExtTd tr").each((function(t){var o=$(this).find(".ext").val();if(null==o||null==o||""==o)return d((0,n.t)("TcustomExtNameEmpty")),r=!1,!1;var a=$(this).find(".size").val();null!=a&&null!=a&&""!=a||(a=0,$(this).find(".size").val("0")),e[t]={ext:o,size:a}})),$("#ExtTy tr").each((function(e){var o=$(this).find(".Type").val();if(null==o||null==o||""==o)return d((0,n.t)("TcustomMineEmpty")),r=!1,!1;var a=$(this).find(".size").val();null!=a&&null!=a&&""!=a||(a=0,$(this).find(".size").val("0")),t[e]={Type:o,size:a}})),$("#blockedDomainsTd tr").each((function(t){var e=$(this).find(".blockedDomain").val();if(null==e||null==e||""==e)return d((0,n.t)("TcustomBlockedDomainEmpty")),r=!1,!1;o[t]=e})),r&&(localStorage[n.PRE_DEF_EXTS]=JSON.stringify(e),localStorage.Type=JSON.stringify(t),localStorage.BlockedDomains=JSON.stringify(o),d((0,n.t)("TcustomSaved"))),localStorage.repeatReg=$("#repeatReg").val(),localStorage.popListCount=$("#MaxDisplayCount").val()})),$("#repeat").bind("click",(function(){$(this).prop("checked")?($("#repeat").attr("checked","true"),localStorage.repeat=!0):($("#repeat").removeAttr("checked"),localStorage.repeat=!1)})),$("#Debug").bind("click",(function(){$(this).prop("checked")?($("#Debug").attr("checked","true"),localStorage.Debug=!0):($("#Debug").removeAttr("checked"),localStorage.Debug=!1)})),$("#TitleName").bind("click",(function(){$(this).prop("checked")?($("#TitleName").attr("checked","true"),localStorage.TitleName=!0):($("#TitleName").removeAttr("checked"),localStorage.TitleName=!1)})),$("#showCountOnIcon").bind("click",(function(){$(this).prop("checked")?($("#showCountOnIcon").attr("checked","true"),localStorage.showCountOnIcon=!0):($("#showCountOnIcon").removeAttr("checked"),localStorage.showCountOnIcon=!1)})),$("#ResetExt").click((function(){d((0,n.t)("TcustomComfirmRest"),!0),$(".comfirmDoit").bind("click",(function(t){t.preventDefault(),delete localStorage[n.PRE_DEF_EXTS],delete localStorage.repeatReg,delete localStorage.repeat,delete localStorage.Debug,delete localStorage.Type,delete localStorage.TitleName,delete localStorage.showCountOnIcon,delete localStorage.popListCount,delete localStorage.BlockedDomains,location.reload()}))})),$("#exportSettingBtn").click((function(){var t={Type:JSON.parse(localStorage.Type),BlockedDomains:JSON.parse(localStorage.BlockedDomains)};t[n.PRE_DEF_EXTS]=JSON.parse(localStorage[n.PRE_DEF_EXTS]),t.repeatReg=localStorage.repeatReg,t.Debug=localStorage.Debug,t.TitleName=localStorage.TitleName,t.popListCount=localStorage.popListCount,t.showCountOnIcon=localStorage.showCountOnIcon,t.repeat=localStorage.repeat;var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),o=document.getElementById("settingDownloadAnchorElem");o.setAttribute("href",e),o.setAttribute("download","cococutSettings.json"),o.click()})),$("#importSettingBtn").click((function(){function t(){$("#importSettingsModal").removeClass("is-active"),$("html").removeClass("is-clipped"),$("#importSettingsCancelBtn").hide()}$("#importSettingsModal").addClass("is-active"),$("html").addClass("is-clipped"),$("#importSettingsCancelBtn").show(),$("#importSettingsOkBtn").addClass("comfirmDoit"),$("#importSettingsOkBtn").click((function(){!function(){var t=e.files[0];if(t){var o=new FileReader;o.readAsText(t,"UTF-8"),o.onload=function(t){!function(t){try{var e=JSON.parse(t);localStorage.Type=JSON.stringify(e.Type),localStorage.repeat=e.repeat,localStorage.repeatReg=e.repeatReg,localStorage.Debug=e.Debug,localStorage.TitleName=e.TitleName,localStorage.showCountOnIcon=e.showCountOnIcon,localStorage.popListCount=e.popListCount,localStorage[n.PRE_DEF_EXTS]=JSON.stringify(e[n.PRE_DEF_EXTS]),localStorage.BlockedDomains=JSON.stringify(e.BlockedDomains),location.reload()}catch(t){alert("Import settings error, error message is:"+t)}}(t.target.result)},o.onerror=function(t){console.log("error reading file")}}}(),t()})),$("#importSettingsCancelBtn").click((function(){t()}));var e=document.querySelector("#importSettingsFile input[type=file]");e.onchange=function(){e.files.length>0&&(document.querySelector("#importSettingsFile .file-name").textContent=e.files[0].name)}}))}]);